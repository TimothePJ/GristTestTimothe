<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.css"/>
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.css">
    <link rel="stylesheet" href="screen.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Calendar Widget</title>
</head>
<body>
<div id="calendar-container">
    <nav id="calendar-options">
        <div id="calendar-navigation-buttons">
            <button id="calendar-button-previous" class="btn btn-sm" onclick="calendarHandler.calendarPrevious()">
                <div class="icon icon-arrow-left"></div>
            </button>
            <button id="calendar-button-next" class="btn btn-sm" onclick="calendarHandler.calendarNext()">
                <div class="icon icon-arrow-right"></div>
            </button>
            <button id="calendar-button-today" class="btn btn-sm" data-i18n="today" onclick="calendarHandler.calendarToday()">Today
            </button>
        </div>
        <div id="calendar-perspective-buttons" class="btn-group btn-group-sm" data-toggle="buttons">
            <label id="calendar-day-label" class="btn" for="calendar-day" >
                <input type="radio" id="calendar-day" class="btn-check" name="calendar-options" value="day"
                       onchange="calendarViewChanges(this)" >
                <span data-i18n="day">Day</span>
            </label>
            <label id="calendar-week-label" class="btn" for="calendar-week" >
                <input type="radio" id="calendar-week" class="btn-check" name="calendar-options" value="week"
                       onchange="calendarViewChanges(this)">
                <span data-i18n="week">Week</span>
            </label>
            <label id="calendar-month-label" class="btn" for="calendar-month" >
                <input type="radio" id="calendar-month" class="btn-check" name="calendar-options" value="month"
                       onchange="calendarViewChanges(this)" >
                <span data-i18n="month">Month</span>
            </label>
        </div>
        <time id="calendar-title"></time>
    </nav>
    <div id="calendar">
    </div>
</div>

<!-- Custom Event Creation Modal -->
<div id="custom-event-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <span class="close" onclick="closeCustomPopup()">&times;</span>
      <h2>Nouvel événement</h2>
    </div>
    <div class="modal-body">
      <form id="custom-event-form">
        <div class="form-group">
          <label for="event-chapitre">Chapitre</label>
          <select id="event-chapitre" class="form-control" required>
            <option value="">Sélectionner un chapitre</option>
            <option value="Développement">Développement</option>
            <option value="Gestion de service">Gestion de service</option>
            <option value="Congés/Maladie/RTT/Férié">Congés/Maladie/RTT/Férié</option>
            <option value="Formation/stages(reçues)">Formation/stages(reçues)</option>
            <option value="01-Analyse Dossier-Organisation">01-Analyse Dossier-Organisation</option>
            <option value="02-Réunions-Visite sur chantier">02-Réunions-Visite sur chantier</option>
            <option value="03-Fond de plans">03-Fond de plans</option>
            <option value="04-Plan de coffrage">04-Plan de coffrage</option>
            <option value="05-Plan de démolition">05-Plan de démolition</option>
            <option value="06-Plan d'armature">06-Plan d'armature</option>
            <option value="07-Note de calcul">07-Note de calcul</option>
            <option value="08-Modélisation-Calcul">08-Modélisation-Calcul</option>
            <option value="09-Etude ouvrages provisoires">09-Etude ouvrages provisoires</option>
            <option value="10-DOE">10-DOE</option>
            <option value="11-Sous-traitance-Calculs">11-Sous-traitance-Calculs</option>
            <option value="12-Sous-traitance-Armatures">12-Sous-traitance-Armatures</option>
            <option value="13-Base">13-Base</option>
            <option value="14-Travaux supplémentaires">14-Travaux supplémentaires</option>
          </select>
        </div>
        <div class="form-group">
          <label for="event-projet">Projet</label>
          <select id="event-projet" class="form-control">
            <option value="">Sélectionner un projet</option>
            <!-- Options will be populated dynamically -->
          </select>
        </div>
        <div class="form-group">
          <label for="event-document">Document</label>
          <select id="event-document" class="form-control">
            <option value="">Sélectionner un document</option>
            <!-- Options will be populated dynamically -->
          </select>
        </div>
        <!-- Hidden fields for time -->
        <input type="hidden" id="event-start">
        <input type="hidden" id="event-end">
        <input type="hidden" id="event-allday">
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" onclick="closeCustomPopup()">Annuler</button>
      <button type="button" class="btn btn-primary" onclick="saveCustomEvent()">Enregistrer</button>
    </div>
  </div>
</div>

</body>
<script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
<script src="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.js"></script>
<script>
  // HACK: Override the default time picker format to be 24-hour. There is no other way to do this,
  // calendar doesn't offer a way to pass this down to the time picker.
  // This also can't be done in the page.js as the next script will grab the reference immediately.
  (function() {
    tui.TimePicker = class extends tui.TimePicker {
      constructor(container, options) {
        super(container, {
          ...options,
          format: 'HH:mm'
        });
      }
    };
  })();
</script>
<script src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>
<script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/i18next@23.5.1/i18next.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/i18next-http-backend@1.3.1/i18nextHttpBackend.min.js"></script>

<script src="page.js"></script>
</body>
</html>
